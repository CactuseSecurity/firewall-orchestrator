source: https://www.howtographql.com/graphql-python/4-authentication/
https://django-graphql-jwt.domake.io/en/latest/settings.html

only for ubuntu upgraded to 20.04:
	sudo apt purge php7.3-common
	sudo a2dismod php7.3

sudo apt install python3-pip python3-venv
pip3 install django-graphql-jwt wheel

git clone https://github.com/howtographql/graphql-python.git
cd graphql-python
python3 -m venv venv
source venv/bin/activate

pip3 install -r requirements.txt
python3 hackernews/manage.py migrate
python3 hackernews/manage.py runserver

browse to http://localhost:8000/graphql/


# mutation to create user:
mutation {
  createUser(username:"tim", email:"a@b.de", password:"abc") {
    user {
      id
      username
      email
    }
  }
}

# mutation to login in user with password and to obtain token:
mutation {
  tokenAuth(username: "tim", password: "abc") {
    token
  }
}

# mutation to verify token validity:
mutation {
  verifyToken(token: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6InRpbSIsImV4cCI6MTU4ODQ5MjIzNywib3JpZ0lhdCI6MTU4ODQ5MTkzN30.r1JNmgef6OQc4lMDQtoGiWI2JEWJcdBEvKVi-ptePEU") {
    payload
  }
}

# mutation to refresh token:
mutation {
  refreshToken(token: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6InRpbSIsImV4cCI6MTU4ODQ5MjIzNywib3JpZ0lhdCI6MTU4ODQ5MTkzN30.r1JNmgef6OQc4lMDQtoGiWI2JEWJcdBEvKVi-ptePEU") {
    payload
  }
}

https://blog.apollographql.com/authorization-in-graphql-452b1c402a9


