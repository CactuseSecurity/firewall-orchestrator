@page "/help/API/login"
@model FWO.Ui.Pages.Help.MainModel
@{
    Layout = "HelpLayout";
}
@section sidebar{
    @{ 
        await Html.RenderPartialAsync("HelpAPISidebar.cshtml"); 
    }
}
@using FWO.Config.Api
@inject UserConfig userConfig

<div class="p-2">
    <h3>@userConfig.GetText("login")</h3>
    @(Html.Raw(userConfig.GetText("H6501")))
    <br><br>

    <h4>@userConfig.GetText("jwt_corr_login")</h4>
    <p><strong>Note:</strong> This endpoint returns both an access token and a refresh token for enhanced security.</p>
    <br>
    <pre>
curl --request POST \
    --url https://localhost:8888/api/AuthenticationToken/GetTokenPair/ \
    --header 'content-type: application/json' \
    --data '{"Username": "user1_demo", "Password": "cactus1"}'
    </pre>
    
    <h5>Response:</h5>
    <pre>
{
  "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "a7f3c8b9e2d1...",
  "accessTokenExpires": "2025-12-11T14:30:00Z",
  "refreshTokenExpires": "2026-01-10T12:00:00Z"
}
    </pre>

    <h4>@userConfig.GetText("token_refresh")</h4>
    <p>Use the refresh token to obtain a new access token without re-entering credentials:</p>
    <br>
    <pre>
curl --request POST \
    --url https://localhost:8888/api/AuthenticationToken/Refresh/ \
    --header 'content-type: application/json' \
    --data '{"RefreshToken": "a7f3c8b9e2d1..."}'
    </pre>

    <h4>@userConfig.GetText("token_revoke")</h4>
    <p>Revoke a refresh token (e.g., on logout):</p>
    <br>
    <pre>
curl --request POST \
    --url https://localhost:8888/api/AuthenticationToken/Revoke/ \
    --header 'content-type: application/json' \
    --header 'Authorization: Bearer YOUR_ACCESS_TOKEN' \
    --data '{"RefreshToken": "a7f3c8b9e2d1..."}'
    </pre>

    <h4>@userConfig.GetText("err_incorr_login")</h4>
    <br>
    <pre>
curl --request POST \
    --url https://localhost:8888/api/AuthenticationToken/GetTokenPair/ \
    --header 'content-type: application/json' \
    --data '{"Username": "user1_demo", "Password": "wrong-pwd"}'
    </pre>

    <h4>@userConfig.GetText("admin_token_generation")</h4>
    <p>Administrators can generate token pairs for other users without requiring their passwords:</p>
    <br>
    <pre>
curl --request POST \
    --url https://localhost:8888/api/AuthenticationToken/GetTokenPairForUser/ \
    --header 'content-type: application/json' \
    --header 'Authorization: Bearer ADMIN_ACCESS_TOKEN' \
    --data '{
      "AdminUsername": "admin",
      "AdminPassword": "admin_password",
      "TargetUserName": "user1_demo",
      "Lifetime": "365.00:00:00"
    }'
    </pre>

    <h5>Response:</h5>
    <pre>
{
  "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "b8g4d9c0f3e2...",
  "accessTokenExpires": "2026-12-11T12:00:00Z",
  "refreshTokenExpires": "2027-01-10T12:00:00Z"
}
    </pre>
</div>
